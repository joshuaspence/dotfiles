---
name: 'Chezmoi'
description: 'GitHub action for Chezmoi.'
runs:
  using: 'composite'
  steps:
    - name: 'Install Chezmoi'
      shell: 'sh'
      run: 'curl --fail --location --no-progress-meter https://get.chezmoi.io | sh -s -- -b ${{ github.action_path }}'
    - name: 'Add Chezmoi to $PATH'
      shell: 'sh'
      run: 'echo "${{ github.action_path }}" >> $GITHUB_PATH'
    - name: 'Display Chezmoi version'
      shell: 'sh'
      run: 'chezmoi --version'

    - name: 'Set $CHEZMOI_GITHUB_ACCESS_TOKEN'
      shell: 'sh'
      run: 'echo "CHEZMOI_GITHUB_ACCESS_TOKEN=${{ github.token }}" >> $GITHUB_ENV'
    - name: 'Initialize Chezmoi'
      shell: 'sh'
      run: 'chezmoi init --promptDefaults .'
