#/
## Configuration file for {@link http://www.gnu.org/software/screen/ screen}.
##
## @author Joshua Spence
## @file   ~/.screenrc
#\

## Screen Settings @{{{
    ## Clear the text when exiting visual programs.
    altscreen on

    ## Autodetach session on hangup instead of terminating screen completely.
    autodetach on

    ## Change background-color-erase setting.
    defbce on

    ## Define a bigger scrollback, default is 100 lines.
    defscrollback 10000

    ## Disable the startup message.
    startup_message off

    ## No annoying screen flashes.
    vbell off
## @}}}

## Screen Key Bindings @{{{
    ## Remove some stupid/dangerous key bindings. @{{{
        bind ^k
        #bind L
        bind ^\

        ## Make them better. @{{{
            bind \\ quit
            bind K kill
            bind I login on
            bind O login off
            bind } history
        ## @}}}
    ## @}}}

    ## You need this line to make backspace work properly on Linux. Otherwise,
    ## backspace becomes CTRL-H, which causes the help window to pop every in
    ## emacs whenever you hit backspace.
    bindkey -k kb stuff ^?

    ## Previous window. @{{{
        bindkey ^[[1;7C prev    # Ctrl+Alt+Left from gnome-terminal
        bindkey ^[^[[D prev     # Ctrl+Alt+Left from putty
    ## @}}}

    ## Next window. @{{{
        bindkey ^[[1;7D next    # Ctrl+Alt+Right from gnome-terminal
        bindkey ^[^[[C next     # Ctrl+Alt+Right from putty
    ## @}}}
## @}}}

## Terminal Settings @{{{
    ## The vt100 description does not mention "dl".
    termcapinfo vt100 dl=5\E[M

    ## Set the hardstatus prop on GUI terms to set the titlebar/icon title.
    termcapinfo xterm*|rxvt*|kterm*|Eterm* hs:ts=\E]0;:fs=\007:ds=\E]0;\007

    ## When the display is split into multiple regions, screen puts a caption at
    ## the bottom of each region.
    caption string "%?%F%{= Bk}%? %C%A %D %d-%m-%Y %{= kB} %t%= %?%F%{= Bk}%:%{= wk}%? %n "

    ## Display a line at the bottom with hostname, window titles & time.
    hardstatus alwayslastline
    hardstatus string '%{= kG}[ %{G}%H %{g}][%= %{= kw}%?%-Lw%?%{r}(%{W}%n*%f%t%?(%u)%?%{r})%{w}%?%+Lw%?%?%= %{g}][%{B} %Y-%m-%d %{W}%c%a %{g}]'

    ## Set these terminals up to be 'optimal' instead of vt100.
    termcapinfo xterm*|linux*|rxvt*|Eterm* OP

    ## Change the xterm initialization string from `is2=\E[!p\E[?3;4l\E[4l\E>`.
    ## This fixes the "Aborted because of window size change" konsole symptoms
    ## found in bug #134198.
    termcapinfo xterm 'is=\E[r\E[m\E[2J\E[H\E[?7h\E[?1;4;6l'

    ## Tells xterm to use the normal screen buffer (which has scrollback), not
    ## the alternate screen buffer.
    termcapinfo xterm|xterms|xs|rxvt ti@:te@

    ## Enable non-blocking mode to better cope with flaky SSH connections.
    defnonblock 5
## @}}}
