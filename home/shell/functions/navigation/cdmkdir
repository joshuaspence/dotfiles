# Don't redefine this function.
command -v cdmkdir >/dev/null && return

# Check for the prerequisite functions.
(
    command -v mkdir >/dev/null &&
    (command -v pushd >/dev/null || command -v cd >/dev/null)
) || return 1

##
# Creates the directory if it doesn't exist, and changes into it.
#
# @param [String] The path of the new directory.
#
# @link @todo
#
cdmkdir() {
    if [ -z "$1" ]; then
        echo "Usage: cdmkdir <path>" >&2
        return 1
    fi

    local cd_cmd
    if command -v pushd >/dev/null; then
        cd_cmd=$(command -v pushd)
    else
        cd_cmd=$(command -v cd)
    fi

    mkdir -p "$1" >/dev/null && $cd_cmd "$1" >/dev/null
}
