#/
## Configuration file for {@link http://git-scm.com/ git}.
##
## @author Joshua Spence
## @file   ~/.gitconfig
#\

[include]
    path = ~/.gituser

[alias]
    ## A shortcut to amend to the previous commit.
    amend = commit --amend

    ## @link http://blog.apiaxle.com/post/handy-git-tips-to-stop-you-getting-fired/
    assume = update-index --assume-unchanged

    ## @link http://blog.apiaxle.com/post/handy-git-tips-to-stop-you-getting-fired/
    assumed = "!git ls-files -v | grep ^h | cut -c 3-"

    ## List all branches.
    branches = branch --all

    ## List the files that have changed.
    changed = diff --name-only

    ## List the files that have changed, and the status of these files.
    ##
    ## @link http://git.wiki.kernel.org/index.php/Aliases
    changes = diff --name-status

    ## Count commits by author.
    commit-count = shortlog --summary --numbered

    ## Show list of files in a conflict state.
    ##
    ## @link http://github.com/jacobwg/dotfiles/blob/master/bin/git-conflicts
    conflicts = ls-files --unmerged | awk '{print $4}' | sort -u

    ## While the empty tree sha1 "4b825dc642cb6eb9a060e54bf8d69288fbee4904" is
    ## known to `git`, you may need to generate it.
    ##
    ## @link http://git.wiki.kernel.org/index.php/Aliases
    empty-tree-sha1 = hash-object -t tree /dev/null

    ## See the changes in a branch since it was forked from another branch, or
    ## since the last merge with the origin branch.
    ##
    ## @link http://git.wiki.kernel.org/index.php/Aliases
    forkdiff = !bash -c 'git diff $(git merge-base "$1" "$2") "$2" "${@: 3}"' -

    ## @link http://git.wiki.kernel.org/index.php/Aliases
    gitkconflict = !gitk --left-right HEAD...MERGE_HEAD

    ## Produces a graphical `git log`.
    ##
    ## <code>
    ## git graphviz HEAD~100..HEAD~60 | dotty /dev/stdin
    ## </code>
    ##
    ## @link http://git.wiki.kernel.org/index.php/Aliases
    graphviz = "!f() { echo 'digraph git {'; git log --pretty='format:  %h -> { %p }' \"$@\" | sed 's/[0-9a-f][0-9a-f]*/\"&\"/g'; echo '}'; }; f"

    ## @link http://git.wiki.kernel.org/index.php/Aliases
    k = !gitk

    ## List all new commits after you fetched, with stats, but excluding merges.
    ##
    ## @link http://git.wiki.kernel.org/index.php/Aliases
    lc = log ORIG_HEAD.. --stat --no-merges

    ## An alternative to `git log` with the following features:
    ##     - one commit per line
    ##     - show graph of commits
    ##     - abbreviated commit IDs
    ##     - dates relative to now
    ##     - show commit references (like `git log --decorate`)
    ##     - lots of color
    ##
    ## @link http://git.wiki.kernel.org/index.php/Aliases
    lg = log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --date=relative

    ## List files that are not under version control.
    ##
    ## @link http://github.com/cypher/dotfiles/blob/master/gitconfig
    ls-ignored = ls-files --exclude-standard --ignored --others

    ## Check if a branch has been merged into the current HEAD if on master.
    ##
    ## @link http://github.com/wadey/dotfiles/blob/master/gitconfig
    merged = !sh -c 'git rev-list HEAD | grep --color=none $(git rev-parse $0)'

    ## Prune all stale remote branches.
    ##
    ## @link http://git.wiki.kernel.org/index.php/Aliases
    prune-all = !git remote | xargs -n 1 git remote prune

    ## List all remotes.
    remotes = remote --verbose

    ## Serve repository on the spot.
    ##
    ## @link http://git.wiki.kernel.org/index.php/Aliases
    serve = !git daemon --reuseaddr --verbose --base-path=. --export-all ./.git

    ## List all tags.
    tags = tag --list

    ## @link http://blog.apiaxle.com/post/handy-git-tips-to-stop-you-getting-fired/
    unassume = update-index --no-assume-unchanged

    ## Attempt to cleanup some common problems.
    ##
    ## @link http://github.com/gregschoen/awesome-git-config/blob/master/.gitconfig
    unfuck = !git fsck && git prune-all && git gc --aggressive --auto

    ## @link http://git.wiki.kernel.org/index.php/Aliases
    whatis = show -s --pretty='tformat:%h (%s, %ad)' --date=short

    ## @link http://github.com/gregschoen/awesome-git-config/blob/master/.gitconfig
    whoami = config --get user.name

    ## @link http://git.wiki.kernel.org/index.php/Aliases
    whois = !sh -c 'git log --regexp-ignore-case -1 --pretty=\"format:%an <%ae>\n\" --author=\"$1\"' -

## Aliases for {@link http://github.com/joshuaspence/git-utils git-utils}.
## Required here only for tab-completion.
##
## @todo Do I need this here?
##
## @{{{
[alias]
    forest = !git-forest
    publish-branch = !git-publish-branch
    rank-contributors = !git-rank-contributors
    show-merges = !git-show-merges
    wtf = !git-wtf
## @}}}

## Aliases for {@link http://github.com/rtomayko/git-sh git-sh}. Required
## here only for tab-completion.
##
## @todo Do I need this here?
##
## @{{{
[alias]
    sh = !git-sh
## @}}}

## Aliases for {@link http://github.com/visionmedia/git-extras git-extras}.
## Required here only for tab-completion.
##
## @todo Do I need this here?
##
## @{{{
[alias]
    alias = !git-alias
    back = !git-back
    bug = !git-bug
    changelog = !git-changelog
    commits-since = !git-commits-since
    contrib = !git-contrib
    count = !git-count
    create-branch = !git-create-branch
    delete-branch = !git-delete-branch
    delete-merged-branches = !git-delete-merged-branches
    delete-submodule = !git-delete-submodule
    delete-tag = !git-delete-tag
    effort = !git-effort
    extras = !git-extras
    feature = !git-feature
    fresh-branch = !git-fresh-branch
    gh-pages = !git-gh-pages
    graft = !git-graft
    ignore = !git-ignore
    info = !git-info
    local-commits = !git-local-commits
    obliterate = !git-obliterate
    pull-request = !git-pull-request
    refactor = !git-refactor
    release = !git-release
    rename-tag = !git-rename-tag
    repl = !git-repl
    setup = !git-setup
    show-tree = !git-show-tree
    squash = !git-squash
    summary = !git-summary
    touch = !git-touch
    undo = !git-undo
## @}}}

[apply]
    whitespace = fix,error

[color]
    branch = auto
    diff = auto
    grep = auto
    interactive = auto
    pager = true
    sh = auto
    showbranch = auto
    status = auto
    ui = auto
    wtf = true
[color "branch"]
    current = yellow reverse
    local = yellow
    remote = green
    plain = normal
[color "diff"]
    plain = normal
    meta = yellow bold
    frag = magenta bold
    func = normal
    old = red bold
    new = green bold
    commit = normal
    whitespace = normal
[color "grep"]
    context = normal
    filename = normal
    function = normal
    linenumber = normal
    match = green
    selected = normal
    separator = normal
[color "interactive"]
    prompt = red
    header = normal
    help = green
    error = red
[color "sh"]
    branch = yellow reverse
    workdir = blue bold
    dirty = red
    dirty-stash = red
    repo-state = red
[color "status"]
    header = normal
    added = yellow
    changed = green
    untracked = cyan
    nobranch = red

[core]
    excludesfile = ~/.gitignore
    whitespace = space-before-tab,-indent-with-non-tab,trailing-space,cr-at-eol

[diff]
    mnemonicprefix = true
    renames = copy
    tool = meld

[difftool]
    prompt = false

[merge]
    tool = meld

[mergetool]
    keepBackup = false
    prompt = false

[rerere]
    ## Remember my merges.
    ##
    ## @link http://gitfu.wordpress.com/2008/04/20/git-rerere-rereremember-what-you-did-last-time/
    enabled = true

[url "git@github.com:"]
    insteadOf = "gh:"
    pushInsteadOf = "github:"
    pushInsteadOf = "git://github.com/"
[url "git://github.com/"]
    insteadOf = "github:"

[url "git@gist.github.com:"]
    insteadOf = "gist:"
    pushInsteadOf = "gist:"
    pushInsteadOf = "git://gist.github.com/"
[url "git://gist.github.com/"]
    insteadOf = "gist:"

[url "git@heroku.com:"]
    insteadOf = "heroku:"

[url "git@gitorious.org:"]
    pushInsteadOf = "git://gitorious.org/"

[web]
    browser = google-chrome
