#!/bin/bash

#/
#| Usage: ports [-h|--help] [<parameters>]
#|
#| Shows processes listening on ports. Any <parameters> are passed to `lsof`.
#|
#\

#/
#- https://github.com/jacobwg/dotfiles/blob/master/bin/ports
#\

set -e

function usage() {
    cat "$0" |
    grep '^#|' |
    cut -c4-
}

function version() {
    cat "$0" |
    grep '^#-' |
    cut -c4-
}

if [[ $# > 0 && ( $1 == '-h' || $1 == '--help' ) ]]; then
    usage
    exit 0
elif [[ $# > 0 && ( $1 == '--version' ) ]]; then
    version
fi

lsof -iTCP -sTCP:LISTEN -P $@
