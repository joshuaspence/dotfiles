#!/bin/bash

#/
## Monitors network traffic on a specified interface.
##
## @param [String] The interface on which to monitor network traffic.
## @param [optional, String] The match expression for `ngrep`.
##
#\

#| Usage: monitor_traffic <interface> [<pattern>]
#|
#| Monitors network traffic on a specified interface.

set -e

function usage() {
    cat "$0" |
    grep '^#|' |
    cut -c4-
}

if [[ $# > 0 && ( "$1" == '-h' || "$1" == '--help' ) ]]; then
    usage
    exit 0
fi

if [[ $# == 0 ]]; then
    usage
    exit 1
fi

ngrep -W byline -q -l -d "$1" "$2"
