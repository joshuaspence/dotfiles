#!/usr/bin/env ruby

#/
## Pipe HTML to a browser.
##
## <code>
## echo "<h1>hi mom!</h1>" | browser
## </code>
##
## @link https://github.com/jacobwg/dotfiles/blob/master/bin/browser
#\

if $stdin.tty?
  puts <<-usage
Usage: browser

Pipe HTML to a browser.

$ echo '<h1>hi mom!</h1>' | browser
$ ron -5 man/rip.5.ron | browser
usage
else
  require 'tempfile'
  tmp = Tempfile.new(['', '.html'])
  File.open(tmp.path, 'w+') do |f|
    f.puts $stdin.read
  end
  exec "$BROWSER #{tmp.path}"
end
